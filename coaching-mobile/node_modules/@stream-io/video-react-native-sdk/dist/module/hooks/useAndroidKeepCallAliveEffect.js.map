{"version":3,"names":["useCall","useCallStateHooks","useEffect","useRef","StreamVideoRN","AppState","NativeModules","Platform","CallingState","getLogger","getKeepCallAliveForegroundServiceTypes","getNotifeeLibNoThrowForKeepCallAlive","notifeeLib","setForegroundService","OS","StreamVideoReactNative","isCallAliveConfigured","then","isConfigured","logger","default","registerForegroundService","Promise","startForegroundService","call_cid","videoConfig","getConfig","foregroundServiceConfig","foregroundService","title","body","android","notificationTexts","settings","getNotificationSettings","authorizationStatus","AuthorizationStatus","AUTHORIZED","channelId","channel","id","createChannel","foregroundServiceTypes","requestAnimationFrame","displayNotification","smallIcon","push","asForegroundService","ongoing","colorized","pressAction","launchActivity","isSetForegroundServiceRan","useAndroidKeepCallAliveEffect","foregroundServiceStartedRef","call","activeCallCid","cid","useCallCallingState","callingState","isOutgoingCall","RINGING","isCreatedByMe","isCallJoined","JOINED","shouldStartForegroundService","current","undefined","run","notifee","displayedNotifications","getDisplayedNotifications","activeCallNotification","find","notification","stopForegroundService","cancelDisplayedNotification","currentState","sub","addEventListener","nextAppState","remove","IDLE","LEFT"],"sourceRoot":"../../../src","sources":["hooks/useAndroidKeepCallAliveEffect.ts"],"mappings":"AAAA,SAASA,OAAO,EAAEC,iBAAiB,QAAQ,iCAAiC;AAC5E,SAASC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,SAASC,aAAa,QAAQ,UAAU;AACxC,SACEC,QAAQ,EAERC,aAAa,EACbC,QAAQ,QACH,cAAc;AACrB,SAASC,YAAY,EAAEC,SAAS,QAAQ,yBAAyB;AACjE,SACEC,sCAAsC,EACtCC,oCAAoC,QAC/B,4BAA4B;AAEnC,MAAMC,UAAU,GAAGD,oCAAoC,CAAC,CAAC;AAEzD,SAASE,oBAAoBA,CAAA,EAAG;EAC9B,IAAIN,QAAQ,CAACO,EAAE,KAAK,KAAK,IAAI,CAACF,UAAU,EAAE;EAC1CN,aAAa,CAACS,sBAAsB,CAACC,qBAAqB,CAAC,CAAC,CAACC,IAAI,CAC9DC,YAAqB,IAAK;IACzB,IAAI,CAACA,YAAY,EAAE;MACjB,MAAMC,MAAM,GAAGV,SAAS,CAAC,CAAC,6BAA6B,CAAC,CAAC;MACzDU,MAAM,CACJ,MAAM,EACN,qEACF,CAAC;MACD;IACF;IACAP,UAAU,CAACQ,OAAO,CAACC,yBAAyB,CAAC,MAAM;MACjD,OAAO,IAAIC,OAAO,CAAC,MAAM;QACvB,MAAMH,MAAM,GAAGV,SAAS,CAAC,CAAC,6BAA6B,CAAC,CAAC;QACzDU,MAAM,CAAC,MAAM,EAAE,iDAAiD,CAAC;MACnE,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CACF,CAAC;AACH;AAEA,eAAeI,sBAAsBA,CAACC,QAAgB,EAAE;EACtD,MAAMC,WAAW,GAAGrB,aAAa,CAACsB,SAAS,CAAC,CAAC;EAC7C,MAAMC,uBAAuB,GAAGF,WAAW,CAACG,iBAAiB;EAC7D,MAAM;IAAEC,KAAK;IAAEC;EAAK,CAAC,GAAGH,uBAAuB,CAACI,OAAO,CAACC,iBAAiB;;EAEzE;EACA,IAAI,CAACpB,UAAU,EAAE;EACjB,MAAMI,qBAAqB,GACzB,MAAMV,aAAa,CAACS,sBAAsB,CAACC,qBAAqB,CAAC,CAAC;EACpE,IAAI,CAACA,qBAAqB,EAAE;IAC1B,MAAMG,MAAM,GAAGV,SAAS,CAAC,CAAC,wBAAwB,CAAC,CAAC;IACpDU,MAAM,CACJ,MAAM,EACN,qEACF,CAAC;IACD;EACF;EACA,MAAMc,QAAQ,GAAG,MAAMrB,UAAU,CAACQ,OAAO,CAACc,uBAAuB,CAAC,CAAC;EACnE,IACED,QAAQ,CAACE,mBAAmB,KAAKvB,UAAU,CAACwB,mBAAmB,CAACC,UAAU,EAC1E;IACA,MAAMlB,MAAM,GAAGV,SAAS,CAAC,CAAC,wBAAwB,CAAC,CAAC;IACpDU,MAAM,CACJ,MAAM,EACN,8FACF,CAAC;IACD;EACF;EACA,MAAMmB,SAAS,GAAGX,uBAAuB,CAACI,OAAO,CAACQ,OAAO,CAACC,EAAE;EAC5D,MAAM5B,UAAU,CAACQ,OAAO,CAACqB,aAAa,CACpCd,uBAAuB,CAACI,OAAO,CAACQ,OAClC,CAAC;EACD,MAAMG,sBAAsB,GAAG,MAAMhC,sCAAsC,CAAC,CAAC;EAC7E;EACA;EACA;EACAiC,qBAAqB,CAAC,MAAM;IAC1B/B,UAAU,CAACQ,OAAO,CAACwB,mBAAmB,CAAC;MACrCJ,EAAE,EAAEhB,QAAQ;MACZK,KAAK;MACLC,IAAI;MACJC,OAAO,EAAE;QACPO,SAAS;QACTO,SAAS,EAAEpB,WAAW,CAACqB,IAAI,EAAEf,OAAO,CAACc,SAAS;QAC9CH,sBAAsB;QACtBK,mBAAmB,EAAE,IAAI;QACzBC,OAAO,EAAE,IAAI;QAAE;QACfC,SAAS,EAAE,IAAI;QACfC,WAAW,EAAE;UACXV,EAAE,EAAE,SAAS;UACbW,cAAc,EAAE,SAAS,CAAE;QAC7B;MACF;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ;;AAEA;AACA,IAAIC,yBAAyB,GAAG,KAAK;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,6BAA6B,GAAGA,CAAA,KAAM;EACjD,MAAMC,2BAA2B,GAAGnD,MAAM,CAAC,KAAK,CAAC;EAEjD,MAAMoD,IAAI,GAAGvD,OAAO,CAAC,CAAC;EACtB,MAAMwD,aAAa,GAAGD,IAAI,EAAEE,GAAG;EAC/B,MAAM;IAAEC;EAAoB,CAAC,GAAGzD,iBAAiB,CAAC,CAAC;EACnD,MAAM0D,YAAY,GAAGD,mBAAmB,CAAC,CAAC;EAE1C,MAAME,cAAc,GAClBD,YAAY,KAAKnD,YAAY,CAACqD,OAAO,IAAIN,IAAI,EAAEO,aAAa;EAC9D,MAAMC,YAAY,GAAGJ,YAAY,KAAKnD,YAAY,CAACwD,MAAM;EAEzD,MAAMC,4BAA4B,GAChC,CAACX,2BAA2B,CAACY,OAAO,KAAKN,cAAc,IAAIG,YAAY,CAAC;EAE1E7D,SAAS,CAAC,MAAgC;IACxC,IAAIK,QAAQ,CAACO,EAAE,KAAK,KAAK,IAAI,CAAC0C,aAAa,EAAE;MAC3C,OAAOW,SAAS;IAClB;IACA,IAAI,CAACvD,UAAU,EAAE,OAAOuD,SAAS;;IAEjC;IACA,IAAIF,4BAA4B,EAAE;MAChC,MAAMG,GAAG,GAAG,MAAAA,CAAA,KAAY;QACtB,IAAId,2BAA2B,CAACY,OAAO,EAAE;UACvC;QACF;QACA,IAAI,CAACd,yBAAyB,EAAE;UAC9BA,yBAAyB,GAAG,IAAI;UAChCvC,oBAAoB,CAAC,CAAC;QACxB;QACA,MAAMwD,OAAO,GAAGzD,UAAU,CAACQ,OAAO;QAClC,MAAMkD,sBAAsB,GAC1B,MAAMD,OAAO,CAACE,yBAAyB,CAAC,CAAC;QAC3C,MAAMC,sBAAsB,GAAGF,sBAAsB,CAACG,IAAI,CACvDC,YAAY,IAAKA,YAAY,CAAClC,EAAE,KAAKgB,aACxC,CAAC;QACD,IAAIgB,sBAAsB,EAAE;UAC1B;UACAH,OAAO,CAACM,qBAAqB,CAAC,CAAC;UAC/BN,OAAO,CAACO,2BAA2B,CAACpB,aAAa,CAAC;QACpD;QACA;;QAEA,MAAMjC,sBAAsB,CAACiC,aAAa,CAAC;QAC3CF,2BAA2B,CAACY,OAAO,GAAG,IAAI;MAC5C,CAAC;;MAED;MACA,IAAI7D,QAAQ,CAACwE,YAAY,KAAK,QAAQ,EAAE;QACtCT,GAAG,CAAC,CAAC;QACL,OAAOD,SAAS;MAClB;MACA,MAAMW,GAAG,GAAGzE,QAAQ,CAAC0E,gBAAgB,CACnC,QAAQ,EACPC,YAA4B,IAAK;QAChC,IAAIA,YAAY,KAAK,QAAQ,EAAE;UAC7BZ,GAAG,CAAC,CAAC;UACLU,GAAG,CAACG,MAAM,CAAC,CAAC;QACd;MACF,CACF,CAAC;MACD,OAAO,MAAM;QACXH,GAAG,CAACG,MAAM,CAAC,CAAC;MACd,CAAC;IACH,CAAC,MAAM,IAAItB,YAAY,KAAKnD,YAAY,CAACqD,OAAO,EAAE;MAChD,OAAO,MAAM;QACX;QACA;QACAjD,UAAU,CAACQ,OAAO,CAACwD,2BAA2B,CAACpB,aAAa,CAAC;MAC/D,CAAC;IACH,CAAC,MAAM,IACLG,YAAY,KAAKnD,YAAY,CAAC0E,IAAI,IAClCvB,YAAY,KAAKnD,YAAY,CAAC2E,IAAI,EAClC;MACA,IAAI7B,2BAA2B,CAACY,OAAO,EAAE;QACvC;QACAtD,UAAU,CAACQ,OAAO,CAACuD,qBAAqB,CAAC,CAAC;QAC1CrB,2BAA2B,CAACY,OAAO,GAAG,KAAK;MAC7C,CAAC,MAAM;QACLtD,UAAU,CAACQ,OAAO,CACfmD,yBAAyB,CAAC,CAAC,CAC3BtD,IAAI,CAAEqD,sBAAsB,IAAK;UAChC,MAAME,sBAAsB,GAAGF,sBAAsB,CAACG,IAAI,CACvDC,YAAY,IAAKA,YAAY,CAAClC,EAAE,KAAKgB,aACxC,CAAC;UACD,IAAIgB,sBAAsB,EAAE;YAC1B;YACA5D,UAAU,CAACQ,OAAO,CAACuD,qBAAqB,CAAC,CAAC;UAC5C;QACF,CAAC,CAAC;MACN;IACF;IACA,OAAOR,SAAS;EAClB,CAAC,EAAE,CAACX,aAAa,EAAEG,YAAY,EAAEM,4BAA4B,CAAC,CAAC;EAE/D/D,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACX;MACA,IAAIoD,2BAA2B,CAACY,OAAO,EAAE;QACvC,IAAI,CAACtD,UAAU,EAAE;QACjBA,UAAU,CAACQ,OAAO,CAACuD,qBAAqB,CAAC,CAAC;QAC1CrB,2BAA2B,CAACY,OAAO,GAAG,KAAK;MAC7C;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;AACR,CAAC","ignoreList":[]}
