{"version":3,"names":["_streamChat","require","_excluded","localAttachmentToAttachment","localAttachment","localMetadata","attachment","_objectWithoutProperties2","default","isLocalImageAttachment","isRemoteUri","image_url","Object","assign","previewUri","originalFile","file","asset_url","uri","createAttachmentsCompositionMiddleware","exports","composer","handlers","compose","_ref","_state$message$attach","state","next","forward","attachmentManager","attachments","message","concat","map","length","localMessage","_toConsumableArray2","id","createDraftAttachmentsCompositionMiddleware","_ref2","_state$draft$attachme","draft"],"sourceRoot":"../../../src","sources":["middlewares/attachments.ts"],"mappings":"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","ignoreList":[]}
