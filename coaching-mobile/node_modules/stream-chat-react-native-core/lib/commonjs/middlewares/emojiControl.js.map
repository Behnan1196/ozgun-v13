{"version":3,"names":["_mergeWith","_interopRequireDefault","require","_streamChat","_callSuper","t","o","e","_getPrototypeOf2","default","_possibleConstructorReturn2","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","prototype","valueOf","call","EmojiSearchSource","_BaseSearchSource","emojiSearchIndex","options","_this","_classCallCheck2","type","_inherits2","_createClass2","key","value","_query","_asyncToGenerator2","searchQuery","_yield$this$emojiSear","length","items","next","emojis","search","filter","slice","map","_ref","_ref$emoticons","emoticons","id","name","native","_ref$skins","skins","_skins","_slicedToArray2","firstSkin","query","_x","arguments","filterQueryResults","_this2","item","Object","assign","getTokenizedSuggestionDisplayName","displayName","searchToken","BaseSearchSource","DEFAULT_OPTIONS","minChars","trigger","createTextComposerEmojiMiddleware","exports","_ref2","finalOptions","mergeWith","emojiSearchSource","activate","handlers","onChange","_onChange","_ref3","complete","forward","state","selection","triggerWithToken","getTriggerCharWithToken","acceptTrailingSpaces","text","end","triggerWasRemoved","_state$suggestions","hasSuggestionsForTrigger","suggestions","newState","newSearchTriggerred","resetStateAndActivate","textWithReplacedWord","replaceWordWithEntity","caretPosition","getEntityString","_getEntityString","word","_emoji$skins","_emoji$native","_yield$emojiSearchSou","emoji","find","_ref4","includes","_ref5","_ref6","_x3","undefined","searchSource","_x2","onSuggestionItemSelect","_ref7","_state$change","_state$suggestions2","_ref8","change","selectedSuggestion","insertItemWithTrigger","insertText"],"sourceRoot":"../../../src","sources":["middlewares/emojiControl.ts"],"mappings":"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","ignoreList":[]}
