{"version":3,"names":["_mapMessageToStorable","require","_mapPollToStorable","_mapReactionToStorable","_mapUserToStorable","_createUpsertQuery","_SqliteClient","upsertMessages","exports","_ref2","_asyncToGenerator2","default","_ref","_ref$execute","execute","messages","storableMessages","storableUsers","storableReactions","storablePolls","forEach","message","push","mapMessageToStorable","user","mapUserToStorable","concat","_toConsumableArray2","latest_reactions","own_reactions","r","mapReactionToStorable","poll","mapPollToStorable","finalQueries","map","storableMessage","createUpsertQuery","storableUser","storableReaction","storablePoll","SqliteClient","logger","polls","reactions","users","executeSqlBatch","_x","apply","arguments"],"sourceRoot":"../../../../src","sources":["store/apis/upsertMessages.ts"],"mappings":"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","ignoreList":[]}
