{"version":3,"names":["_upsertDraft","require","_upsertMembers","_upsertMessages","_upsertReads","_mapChannelDataToStorable","_createUpsertQuery","_SqliteClient","upsertChannels","exports","_ref2","_asyncToGenerator2","default","_ref","channels","_ref$execute","execute","isLatestMessagesSet","queries","channelIds","map","channel","cid","SqliteClient","logger","_loop","push","createUpsertQuery","mapChannelDataToStorable","draft","members","membership","messages","read","includes","m","_m$user","_membership$user","user","id","_membership$user2","Object","assign","user_id","concat","upsertDraft","upsertMembers","upsertReads","reads","upsertMessages","executeSqlBatch","_x","apply","arguments"],"sourceRoot":"../../../../src","sources":["store/apis/upsertChannels.ts"],"mappings":"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","ignoreList":[]}
