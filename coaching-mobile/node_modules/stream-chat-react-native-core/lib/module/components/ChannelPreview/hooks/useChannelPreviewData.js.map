{"version":3,"names":["_react","require","_throttle","_interopRequireDefault","_useIsChannelMuted2","_useLatestMessagePreview","_contexts","useChannelPreviewData","exports","channel","client","forceUpdateOverride","_useState","useState","_useState2","_slicedToArray2","default","forceUpdate","setForceUpdate","_useState3","state","messages","length","_useState4","lastMessage","setLastMessage","_useState5","countUnread","_useState6","unread","setUnread","_useIsChannelMuted","useIsChannelMuted","muted","_useChannelsContext","useChannelsContext","contextForceUpdate","channelListForceUpdate","channelLastMessage","channelLastMessageString","id","updated_at","useEffect","unsubscribe","messageComposer","registerDraftEventSubscriptions","_client$on","on","newUnreadCount","handleReadEvent","event","_event$user","_event$user2","cid","user","userID","prev","_client$on2","handleUnreadEvent","_event$user3","_client$user","_client$on3","refreshUnreadCount","useMemo","throttle","handleEvent","latestMessages","handleNewMessageEvent","message","parent_id","show_in_channel","handleUpdatedOrDeletedMessage","prevLastMessage","_event$message","listeners","forEach","l","latestMessagePreview","useLatestMessagePreview"],"sourceRoot":"../../../../../src","sources":["components/ChannelPreview/hooks/useChannelPreviewData.ts"],"mappings":"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","ignoreList":[]}
