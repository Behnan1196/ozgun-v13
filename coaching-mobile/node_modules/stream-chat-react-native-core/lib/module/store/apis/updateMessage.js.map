{"version":3,"names":["_mapMessageToStorable","require","_mapReactionToStorable","_mapUserToStorable","_createSelectQuery","_createUpdateQuery","_createUpsertQuery","_SqliteClient","updateMessage","exports","_ref2","_asyncToGenerator2","default","_ref","_ref$execute","execute","message","queries","messages","SqliteClient","executeSql","apply","createSelectQuery","id","length","storableMessage","mapMessageToStorable","Object","assign","push","createUpdateQuery","storableUsers","user","storableUser","mapUserToStorable","createUpsertQuery","latestReactions","latest_reactions","ownReactions","own_reactions","storableReactions","concat","_toConsumableArray2","forEach","r","storableReaction","mapReactionToStorable","logger","reactions","users","executeSqlBatch","_x","arguments"],"sourceRoot":"../../../../src","sources":["store/apis/updateMessage.ts"],"mappings":"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","ignoreList":[]}
